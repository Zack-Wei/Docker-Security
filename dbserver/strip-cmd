#!/bin/bash

./strip-image.sh  \
  -v \
  -i u2229437/db_base   \
  -p mariadb-client \
  -p mysql-client \
  -p net-tools \
  -p ip-route2 \
  -f /mysql/mysql.conf.d/mysqld.cnf \
  -f /var/lib/mysql/ib_logfile0 \
  -f /usr/sbin/mariadbd \
  -f /var/lib/mysql/ibdata1 \
  -f /usr/bin/my_print_defaults \
  -f /usr/ \
  -f /usr/lib/x86_64-linux-gnu/libmpfr.so.6.1.0 \
  -f /usr/lib/x86_64-linux-gnu/ \
  -f /usr/lib/x86_64-linux-gnu/libc.so.6 \
  -f /usr/share/mysql/fill_help_tables.sql \
  -f /usr/bin/bash \
  -f /usr/lib/ \
  -f /usr/lib/ \
  -f /usr/lib/x86_64-linux-gnu/libzstd.so.1.4.8 \
  -f /usr/lib/x86_64-linux-gnu/libsystemd.so.0.32.0 \
  -f /usr/bin/gawk \
  -f /usr/lib/ \
  -f /usr/lib/x86_64-linux-gnu/libpcre2-8.so.0.10.4 \
  -f /usr/lib/x86_64-linux-gnu/libgmp.so.10.4.1 \
  -f /usr/lib/locale/C.utf8/LC_CTYPE \
  -f /usr/lib/x86_64-linux-gnu/libpmem.so.1.0.0 \
  -f /mysql/mysql.conf.d/mysqld.cnf \
  -f /etc/mysql/conf.d \
  -f /bin/id \
  -f /run/mysqld \
  -f /etc/passwd \
  -f /etc/group \
  -f '/lib/*/libnss*' \
  -f /bin/ls \
  -f /bin/cat \
  -f /bin/bash \
  -f /bin/sh \
  -f /bin/mkdir \
  -f /bin/ps \
  -f /var/run \
  -f /usr/sbin \
  -f /sbin \
  -f /usr/lib64 \
  -d Dockerfile \
  -t u2229437/db_stripped:1 

